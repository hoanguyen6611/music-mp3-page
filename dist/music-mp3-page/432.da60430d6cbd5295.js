"use strict";(self.webpackChunkmusic_mp3_page=self.webpackChunkmusic_mp3_page||[]).push([[432],{432:(lt,z,a)=>{a.r(z),a.d(z,{MyPlaylistsModule:()=>st});var d=a(6895),f=a(9116),P=a(1293),t=a(4650),m=a(4280),y=a(8505),g=a(3900),v=a(8746),Z=a(9646),E=a(5445),S=a(9651),M=a(9383),D=a(8689);const F={Data:[],IsLoading:!1,IsFormLoading:!1,IsLoadingDetail:!1,Value:{id:"",name:"",image:"",description:"",listSong:[]}};let C=(()=>{class e extends m.m1{constructor(i,n,o,c){super(F),this.service=i,this.message=n,this.translateService=o,this.favoriteService=c,this.vm$=this.select(this.state$,({Data:r,IsLoading:l})=>({Data:r,IsLoading:l}),{debounce:!0}),this.value$=this.select(r=>r.Value),this.setIsLoading=this.updater((r,l)=>({...r,IsLoading:l})),this.loadData=this.effect(r=>r.pipe((0,y.b)(()=>{this.patchState({IsLoading:!0})}),(0,g.w)(()=>this.service.getAllMyPlayList().pipe((0,m._b)(l=>{this.patchState({IsLoading:!1,Data:l})},l=>{this.patchState({Data:[],IsLoading:!1})}),(0,v.x)(()=>{this.patchState({IsLoading:!1})}))))),this.loadAlbumDetail=this.effect(r=>r.pipe((0,y.b)(()=>this.patchState({IsLoadingDetail:!0})),(0,g.w)(l=>l?this.service.getMyPlaylistDetail(l):(0,Z.of)(void 0)),(0,m._b)(l=>{this.patchState({Value:l,IsLoadingDetail:!1})},l=>{this.patchState({Value:void 0,IsLoadingDetail:!1})}))),this.addSongToPlaylist=this.effect(r=>r.pipe((0,y.b)(()=>this.patchState(l=>({}))),(0,g.w)(([l,u])=>this.service.addSongToPlaylist(l,u).pipe((0,y.b)(()=>{this.patchState({})}),(0,m._b)(()=>{this.message.success(this.translateService.instant("MESSAGE.SUCCESS"))},ot=>{this.message.error(ot.error.message)}),(0,v.x)(()=>{this.patchState({})}))))),this.createPlaylist=this.effect(r=>r.pipe((0,g.w)(l=>this.service.createPlaylist(l).pipe((0,y.b)(()=>{this.patchState({IsFormLoading:!0})}),(0,m._b)(()=>{this.message.success(this.translateService.instant("MESSAGE.SUCCESS")),this.loadData()},u=>{this.message.error(u.error.message)}),(0,v.x)(()=>{this.patchState({IsFormLoading:!1})}))))),this.addSongToFavorite=this.effect(r=>r.pipe((0,g.w)(l=>this.favoriteService.addSongFavorite(l).pipe((0,m._b)(()=>{this.message.success(this.translateService.instant("MESSAGE.ADD_TO_FAVORITE"))},u=>{this.message.error(u.error.message)}))))),this.loadData()}refreshData(){this.patchState({}),this.loadData()}}return e.\u0275fac=function(i){return new(i||e)(t.LFG(E.e),t.LFG(S.dD),t.LFG(M.sK),t.LFG(D.e))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})();var O=a(9653),b=a(812),U=a(9890),Y=a(7698),L=a(275);function J(e,s){if(1&e){const i=t.EpF();t.TgZ(0,"div")(1,"app-playlist-track",6),t.NdJ("favorite",function(o){t.CHM(i);const c=t.oxw(3);return t.KtG(c.addMusicFavorite(o))})("addMusic",function(o){t.CHM(i);const c=t.oxw(3);return t.KtG(c.addMusicToPlaylist(o))})("playMusic",function(o){t.CHM(i);const c=t.oxw(3);return t.KtG(c.playMusicItem(o))}),t.qZA()()}if(2&e){const i=s.$implicit,n=s.index,o=t.oxw(2).ngIf;t.xp6(1),t.Q6J("index",n)("song",i)("playlist",o)("showButtonAddPlaylist",!1)}}function G(e,s){if(1&e&&(t.TgZ(0,"div",4),t.YNc(1,J,2,4,"div",5),t.qZA()),2&e){const i=s.ngIf;t.xp6(1),t.Q6J("ngForOf",i)}}function N(e,s){if(1&e){const i=t.EpF();t.TgZ(0,"div"),t._UZ(1,"app-detail",1),t.TgZ(2,"app-play-button",2),t.NdJ("click",function(){const c=t.CHM(i).ngIf,r=t.oxw();return t.KtG(r.playMusic(c.listSong))}),t.qZA(),t._UZ(3,"app-title-list"),t.YNc(4,G,2,1,"div",3),t.qZA()}if(2&e){const i=s.ngIf;t.xp6(1),t.Q6J("imageUrl",i.image)("description",i.description)("title",i.name)("quantity",i.listSong.length),t.xp6(3),t.Q6J("ngIf",i.listSong)}}let Q=(()=>{class e{constructor(i,n,o){this.myPlaylistStore=i,this.route=n,this.store=o,this.id=String(this.route.snapshot.paramMap?.get("id")),this.myPlaylistDetail$=this.myPlaylistStore.loadAlbumDetail(this.id),this.value$=this.myPlaylistStore.value$,this.vmPlaylist$=this.myPlaylistStore.vm$}ngOnInit(){}addMusicFavorite(i){this.myPlaylistStore.addSongToFavorite(i)}addMusicToPlaylist(i){}playMusic(i){this.store.dispatch((0,P.Bn)({value:i})),this.store.dispatch((0,P.vZ)({value:i[0]}))}playMusicItem(i){this.store.dispatch((0,P.vZ)({value:i}))}}return e.\u0275fac=function(i){return new(i||e)(t.Y36(C),t.Y36(f.gz),t.Y36(O.yh))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-my-playlist-detail"]],decls:2,vars:3,consts:[[4,"ngIf"],["type","Playlist",3,"imageUrl","description","title","quantity"],[3,"click"],["class","items-center px-4 cursor-pointer h-14 hover:bg-white hover:bg-opacity-10",4,"ngIf"],[1,"items-center","px-4","cursor-pointer","h-14","hover:bg-white","hover:bg-opacity-10"],[4,"ngFor","ngForOf"],[3,"index","song","playlist","showButtonAddPlaylist","favorite","addMusic","playMusic"]],template:function(i,n){1&i&&(t.YNc(0,N,5,5,"div",0),t.ALo(1,"async")),2&i&&t.Q6J("ngIf",t.lcZ(1,1,n.value$))},dependencies:[d.sg,d.O5,b.J,U.F,Y.x,L.H,d.Ov],styles:["[_nghost-%COMP%]{padding:1rem}"]}),e})();var p=a(4006),V=a(279),R=a(1516);let $=(()=>{class e{constructor(){this.playlist={id:"",name:"",state:!0,image:"",description:"",listSong:[]}}ngOnInit(){}}return e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-playlist"]],inputs:{playlist:"playlist"},decls:9,vars:7,consts:[[1,"flex","flex-col","flex-1",3,"routerLink"],[1,"media-cover",3,"is-playing"],[1,"mb-4",3,"imageUrl"],["asClickStopPropagation","",1,"play-button-overlay",3,"primary","large","isPlaying"],[1,"media-description"],[1,"font-bold","text-white","ellipsis-one-line","hover:text-white"],[1,"text-description"]],template:function(i,n){1&i&&(t.TgZ(0,"a",0)(1,"div",1),t._UZ(2,"app-media-cover",2)(3,"app-play-button",3),t.qZA(),t.TgZ(4,"div",4)(5,"div",5),t._uU(6),t.qZA(),t.TgZ(7,"div",6),t._uU(8),t.qZA()()()),2&i&&(t.Q6J("routerLink",n.playlist.id),t.xp6(2),t.Q6J("imageUrl",n.playlist.image),t.xp6(1),t.Q6J("primary",!0)("large",!0)("isPlaying",!1),t.xp6(3),t.hij(" ",n.playlist.name," "),t.xp6(2),t.hij(" ",n.playlist.description," "))},dependencies:[f.yS,R.L,L.H],styles:["[_nghost-%COMP%]{border-radius:4px;transition:background-color .3s ease;background-color:#181818;display:flex;flex-direction:column;padding:1rem}[_nghost-%COMP%]::hover{background-color:#282828}[_nghost-%COMP%]::hover   .play-button-overlay[_ngcontent-%COMP%]{opacity:1;visibility:visible;transform:translateY(0)}.play-button-overlay[_ngcontent-%COMP%]{right:10px;bottom:25px;opacity:0;visibility:hidden;transition:all .3s;transform:translateY(10px);position:absolute}.media-cover[_ngcontent-%COMP%]{display:flex;position:relative}.media-cover.is-playing[_ngcontent-%COMP%]   .play-button-overlay[_ngcontent-%COMP%]{opacity:1;visibility:visible;transform:translateY(0)}"]}),e})();var x=a(5156),_=a(3679),h=a(6704),A=a(5681),T=a(6616),K=a(7044),H=a(1664);function B(e,s){if(1&e&&(t.ynx(0),t._UZ(1,"app-playlist",9),t.BQk()),2&e){const i=s.$implicit;t.xp6(1),t.Q6J("playlist",i)}}function j(e,s){if(1&e){const i=t.EpF();t.TgZ(0,"div",3)(1,"a",4)(2,"div",5)(3,"div",6)(4,"button",7),t.NdJ("click",function(){t.CHM(i);const o=t.oxw();return t.KtG(o.addPlaylist())}),t._uU(5,"T\u1ea1o m\u1edbi playlist"),t.qZA()()()(),t.YNc(6,B,2,1,"ng-container",8),t.qZA()}if(2&e){const i=s.ngIf;t.xp6(6),t.Q6J("ngForOf",i.Data)}}const I=function(e){return{field:e}};function w(e,s){if(1&e){const i=t.EpF();t.ynx(0),t.TgZ(1,"nz-spin",10)(2,"form",11)(3,"div",12)(4,"div",13)(5,"nz-form-item")(6,"nz-form-label",14),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"nz-form-control",15),t.ALo(10,"translate"),t.ALo(11,"translate"),t._UZ(12,"input",16),t.ALo(13,"translate"),t.qZA()()()(),t.TgZ(14,"div",12)(15,"div",17)(16,"nz-form-item")(17,"nz-form-label",18),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"nz-form-control",15),t.ALo(21,"translate"),t.ALo(22,"translate"),t.TgZ(23,"input",19),t.NdJ("change",function(o){t.CHM(i);const c=t.oxw();return t.KtG(c.onFileChangeImage(o))}),t.qZA(),t.TgZ(24,"button",20),t.NdJ("click",function(){t.CHM(i);const o=t.oxw();return t.KtG(o.upLoadImage())}),t._UZ(25,"span",21),t._uU(26," Click to Upload "),t.qZA()()()()(),t.TgZ(27,"div",12)(28,"div",13)(29,"nz-form-item")(30,"nz-form-label",22),t._uU(31),t.ALo(32,"translate"),t.qZA(),t.TgZ(33,"nz-form-control",15),t.ALo(34,"translate"),t.ALo(35,"translate"),t._UZ(36,"textarea",23),t.ALo(37,"translate"),t.qZA()()()()()(),t.BQk()}if(2&e){const i=t.oxw();t.xp6(1),t.Q6J("nzSpinning",!1),t.xp6(1),t.Q6J("formGroup",i.formGroup)("nzLayout","vertical"),t.xp6(5),t.hij(" ",t.lcZ(8,11,"MYPLAYLIST.NAME")," "),t.xp6(2),t.s9C("nzErrorTip",t.xi3(10,13,"MESSAGE.REQUIRED",t.VKq(36,I,t.lcZ(11,16,"MYPLAYLIST.NAME")))),t.xp6(3),t.s9C("placeholder",t.lcZ(13,18,"MESSAGE.INPUT_PLACEHOLDER")),t.xp6(6),t.hij(" ",t.lcZ(19,20,"MYPLAYLIST.IMAGE")," "),t.xp6(2),t.s9C("nzErrorTip",t.xi3(21,22,"MESSAGE.REQUIRED",t.VKq(38,I,t.lcZ(22,25,"MYPLAYLIST.IMAGE")))),t.xp6(11),t.hij(" ",t.lcZ(32,27,"MYPLAYLIST.DESCRIPTION")," "),t.xp6(2),t.s9C("nzErrorTip",t.xi3(34,29,"MESSAGE.REQUIRED",t.VKq(40,I,t.lcZ(35,32,"MYPLAYLIST.DESCRIPTION")))),t.xp6(3),t.s9C("placeholder",t.lcZ(37,34,"MESSAGE.INPUT_PLACEHOLDER"))}}const X=[{path:"",component:(()=>{class e{constructor(i,n){this.store=i,this.uploadFileService=n,this.isVisible=!1,this.image="",this.pathImage="",this.filePathImage="",this.formGroup=new p.cw({name:new p.NI("",p.kI.required),image:new p.NI("",p.kI.required),description:new p.NI("",p.kI.required),state:new p.NI(!0,p.kI.required)}),this.vmPlaylist$=this.store.vm$}ngOnInit(){}addPlaylist(){this.isVisible=!0}handleOk(){const i=this.formGroup.getRawValue();i.image=this.image,console.log(i),this.store.createPlaylist(i),this.isVisible=!1}handleCancel(){this.isVisible=!1}onFileChangeImage(i){this.pathImage=i.target.files[0],this.filePathImage=i.target.files[0].name}upLoadImage(){if(this.pathImage&&this.filePathImage){const i=this.uploadFileService.ref(this.filePathImage);this.uploadFileService.upload(this.filePathImage,this.pathImage).snapshotChanges().pipe((0,v.x)(()=>{i.getDownloadURL().subscribe(n=>{this.image=n})})).subscribe()}}}return e.\u0275fac=function(i){return new(i||e)(t.Y36(C),t.Y36(V.Q1))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-my-playlists"]],decls:4,vars:4,consts:[["class","grid grid-cols-6 gap-10",4,"ngIf"],["nzTitle","T\u1ea1o m\u1edbi playlist c\xe1 nh\xe2n",3,"nzVisible","nzVisibleChange","nzOnCancel","nzOnOk"],[4,"nzModalContent"],[1,"grid","grid-cols-6","gap-10"],[1,"flex","flex-col","flex-1"],[1,"media-description"],[1,"font-bold","text-white","ellipsis-one-line","hover:text-white"],[3,"click"],[4,"ngFor","ngForOf"],[3,"playlist"],[3,"nzSpinning"],["nz-form","",3,"formGroup","nzLayout"],["nz-row",""],["nz-col","","nzSpan","24"],["nzFor","'name'"],[3,"nzErrorTip"],["type","text","formControlName","name","id","name","nz-input","","maxLength","50",1,"input-form",3,"placeholder"],["nz-col","","nzSpan","12"],["nzFor","'image'"],["type","file",3,"change"],["nz-button","",3,"click"],["nz-icon","","nzType","upload"],["nzFor","'author'"],["nz-input","","formControlName","description","nzAutosize","",1,"input-form",3,"placeholder"]],template:function(i,n){1&i&&(t.YNc(0,j,7,1,"div",0),t.ALo(1,"async"),t.TgZ(2,"nz-modal",1),t.NdJ("nzVisibleChange",function(c){return n.isVisible=c})("nzOnCancel",function(){return n.handleCancel()})("nzOnOk",function(){return n.handleOk()}),t.YNc(3,w,38,42,"ng-container",2),t.qZA()),2&i&&(t.Q6J("ngIf",t.lcZ(1,2,n.vmPlaylist$)),t.xp6(2),t.Q6J("nzVisible",n.isVisible))},dependencies:[d.sg,d.O5,$,x.du,x.Hf,_.t3,_.SK,h.Lr,h.Nx,h.iK,h.Fd,A.W,p._Y,p.Fj,p.JJ,p.JL,p.sg,p.u,T.ix,K.w,H.dQ,d.Ov,M.X$],styles:["[_nghost-%COMP%]{padding:1rem}"]}),e})()},{path:":id",component:Q}];let k=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[f.Bz.forChild(X),f.Bz]}),e})();var W=a(7652),q=a(3566),tt=a(1855),it=a(7500),et=a(8526),at=a(908),nt=a(6198);let st=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[C],imports:[d.ez,k,W.y,q.j,tt.S,it.k,et.L,at.J,S.gR,M.aw,x.Qp,h.U5,A.j,p.UX,T.sL,M.aw,S.gR,nt.L]}),e})()}}]);